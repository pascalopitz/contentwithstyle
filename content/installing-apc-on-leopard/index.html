<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />

<link rel="stylesheet" href="/default/css/shared.css" type="text/css" media="screen" />
<!--[if lte IE 6]><link rel="stylesheet" type="text/css" media="screen" href="/default/css/ie6.css" /><![endif]-->
<!--[if gte IE 7]><link rel="stylesheet" type="text/css" media="screen" href="/default/css/ie7.css" /><![endif]-->

<meta http-equiv="content-language" content="en" />

<meta name="author" content="Content with Style" />
<meta name="copyright" content="Content with Style" />
<meta name="publisher" content="Content with Style" />

<meta name="robots" content="all" />
<meta name="revisit-after" content="2 days" />

<link rel="alternate" type="rss" href="/atom.xml" />
<link rel="shortcut icon" type="image/ico" href="/favicon.ico" />

<title>Content with Style - Installing APC on Leopard</title>



        <link rel="stylesheet" title="Default" href="/3rdparty/highlight/styles/github.css">
    </head>

    <body class="article">

        <div class="header">
            <div class="inner">
                <ul class="clearfix">
                    <li><a href="/" class="home">Home</a></li>
                    <li><a href="/archive" class="archive">Archive</a></li>
                </ul>
            </div>
        </div>

        <div class="title-row">
    <div>
        <strong>Content with Style</strong>
        <p>Web Technique</p>
    </div>
</div>


        <div class="content clearfix">
            <div class="main-col">
                <ul class="breadcrumb clearfix">
    <li class="home"><a href="/">Content with Style</a></li>
    <li><a href="/content/installing-apc-on-leopard/index.html" class="active">Installing APC on Leopard</a></li>
</ul>

<h1>Installing APC on Leopard</h1>

<div class="info clearfix">
    <p class="credit">by Matt Dunn on February 3 2009, 12:02</p>
</div>

<div class="article">
    <p>There are a few steps needed to install <a href="http://www.php.net/apc">APC</a> on OS X Leopard. Don't worry, it may look a bit daunting if you've never had to compile anything before but it's very straight forward.</p>

<ul>
<li>First, download the appropriate version of the <a href="http://pecl.php.net/package/APC">APC package</a></li>
<li>Unpack it (doesn't matter where)</li>
<li>Now start Terminal and cd to the unpacked directory from the above step</li>
<li>Run 'phpize'</li>
<li>Now it needs to be configured. Copy the following configuration (note: it must be entered into the Terminal prompt as a <strong>single</strong> line)</li>
</ul>

<pre><code>MACOSX_DEPLOYMENT_TARGET=10.5 CFLAGS="-arch ppc -arch ppc64 -arch i386 -arch x86_64 -g -Os -pipe -no-cpp-precomp" CCFLAGS="-arch ppc -arch ppc64 -arch i386 -arch x86_64 -g -Os -pipe" CXXFLAGS="-arch ppc -arch ppc64 -arch i386 -arch x86_64 -g -Os -pipe" LDFLAGS="-arch ppc -arch ppc64 -arch i386 -arch x86_64 -bind_at_load" ./configure</code></pre>

<ul>
<li>Nearly there: now type 'make'</li>
<li>sudo make install (you will need to enter your root password)</li>
<li>Finally, add 'extension=apc.so' into your php.ini</li>
</ul>

<p>And that's it!</p>


</div>


<div class="comments" id="comments">
    <h2>Comments</h2>
    <ul class="comments-list">
        <li class="odd" id="comment-5450">
<div class="comment-text"><p>A similar approach for mcrypt:
<a href="http://michaelgracie.com/2008/12/26/plugging-mcrypt-into-php-on-leopard-10.5.6/">Plugging mcrypt into PHP, on Leopard 10.5.6</a></p></div>
<p class="comment-info">by
<a href="http://contentwithstyle.pascalopitz.com" rel="nofollow">Pascal Opitz</a> on February 9 2009, 15:24 <a href="#comment-5450">#</a>
</p>
</li>
<li class="even" id="comment-5451">
<div class="comment-text"><p>
And here is something for <a href="http://gidden.net/tom/2008/06/30/mysql-and-pdo-on-os-x-leopard-intel/">MySQL and PDO on OS X Leopard, Intel</a>
</p>

<p>Also <a href="http://www.viames.it/mac-os-x.html">this guy</a> has a couple of pre-compiled binaries</p></div>
<p class="comment-info">by
<a href="http://contentwithstyle.pascalopitz.com" rel="nofollow">Pascal Opitz</a> on February 9 2009, 15:46 <a href="#comment-5451">#</a>
</p>
</li>
<li class="odd" id="comment-5556">
<div class="comment-text">Thanks.  I was having a bit of trouble getting this going on my Leopard server (no problems on a PPC box running Tiger Server).  Your command line for configure did something that worked and I now have it going.

Here's a follow on question.   I've expanded the shared memory segment to 128Mb.  Is that not necessary any longer...with Tiger and surely earlier, the default shared memory segment was 4Mb.    </div>
<p class="comment-info">by
<a href="http://timesync.gmu.edu/wordpress" rel="nofollow">Wally</a> on February 26 2009, 14:54 <a href="#comment-5556">#</a>
</p>
</li>
<li class="even" id="comment-5422">
<div class="comment-text"><p>
Just to give the man a bit more of an introduction: Matt was my team leader for quite some time, and I have learned tremendous amounts from working with him. I am very very happy that I could persuade him to do the occasional post here, even more so as this is he is the first contributor for CwS apart from Matthias, Mike and me so far. A milestone, so to say.
</p>

<p>
Good to have you here, Matt!
</p></div>
<p class="comment-info">by
<a href="http://contentwithstyle.pascalopitz.com" rel="nofollow">Pascal Opitz</a> on February 3 2009, 12:07 <a href="#comment-5422">#</a>
</p>
</li>
<li class="odd" id="comment-7495">
<div class="comment-text"><p>Matt,</p>

<p>Thank you for this info, I got down to the second to last command before I had any problems.</p>
<p>
When I run 'make' I get the following errors:</p>

<pre><code>/usr/local/php5/bin/APC-3.0.19/php_apc.c:959: error: duplicate 'static'
/usr/local/php5/bin/APC-3.0.19/php_apc.c:959: error: duplicate 'static'
/usr/local/php5/bin/APC-3.0.19/php_apc.c:959: error: duplicate 'static'
/usr/local/php5/bin/APC-3.0.19/php_apc.c:959: error: duplicate 'static'
lipo: can't open input file: /var/folders/WL/WLuS6cKnE0mu8N+eRzVeDk+++TM/-Tmp-//ccPNdzLH.out (No such file or directory)
make: *** [php_apc.lo] Error 1</code></pre>

<p>
Any help would be great!!</p>

<p>
Thanks,
Michael</p></div>
<p class="comment-info">by
Michael on November 10 2009, 17:06 <a href="#comment-7495">#</a>
</p>
</li>
<li class="even" id="comment-8479">
<div class="comment-text">To compile it, comment out line 959, or 958; the line just contains <code>static</code>.</div>
<p class="comment-info">by
kiamlaluno on June 30 2010, 17:43 <a href="#comment-8479">#</a>
</p>
</li>
<li class="odd" id="comment-8218">
<div class="comment-text">Michael, I'm having the same issue. Did you ever get it resolved?

If others have any idea what may be causing our "php_apc.c:959: error: duplicate 'static'" build error, please let us know.</div>
<p class="comment-info">by
Paul on March 15 2010, 23:20 <a href="#comment-8218">#</a>
</p>
</li>
<li class="even" id="comment-9807">
<div class="comment-text">We have a very busy website.  We've found the MacPorts APC extension (php5-apc) is a lot easier to setup and install with the MacPorts PHP build, which makes using the latest version of PHP really easy.  The downside with MacPorts PHP, though, is that you have to use the MacPorts Apache instead of the Apple Apache because the latter crashes when attempting to load the MacPorts PHP module.

We noticed a 50% improvement in CPU utilization with MacPorts.  I'm sure a custom build could improve on that maybe another 5%, but 50% is good enough given the other benefits MacPorts offers.</div>
<p class="comment-info">by
Lando K on January 20 2011, 18:24 <a href="#comment-9807">#</a>
</p>
</li>
<li class="odd" id="comment-9847">
<div class="comment-text">So Lando, do you use this in a production environment or just as a dev box?</div>
<p class="comment-info">by
<a href="http://contentwithstyle.pascalopitz.com" rel="nofollow">Pascal Opitz</a> on January 22 2011, 09:27 <a href="#comment-9847">#</a>
</p>
</li>

    </ul>
</div>

            </div>

            <div class="sidebar">
                <div class="box info">
    <h2>Content with Style?</h2>

    <p>
        Content with Style was a London based blog, focused on web technology and related topics.  We wrote posts between 2005 and 2011. This is the archived content from that time.
    </p>
</div>
                <!-- AddThis Button BEGIN -->
<div class="bookmarks">
    <script type="text/javascript">var addthis_pub="contentwithstyle";</script>
    <a href="http://www.addthis.com/bookmark.php?v=20" onmouseover="return addthis_open(this, '', '[URL]', '[TITLE]')" onmouseout="addthis_close()" onclick="return addthis_sendto()"><img src="http://s7.addthis.com/static/btn/lg-bookmark-en.gif" width="125" height="16" alt="Bookmark and Share" style="border:0"/></a>
    <script type="text/javascript" src="http://s7.addthis.com/js/200/addthis_widget.js"></script>
</div>
<!-- AddThis Button END -->

                <p class="rss-link">
    <a href="/atom.xml">Grab our feed</a>
</p>

                <div class="box date">
    <h2>Browse by Date</h2>
    <h3>2011</h3><ul class="clearfix"><li><a href="/archive/date/2011/March">March</a></li><li><a href="/archive/date/2011/January">January</a></li></ul><h3>2010</h3><ul class="clearfix"><li><a href="/archive/date/2010/December">December</a></li><li><a href="/archive/date/2010/November">November</a></li><li><a href="/archive/date/2010/October">October</a></li><li><a href="/archive/date/2010/September">September</a></li><li><a href="/archive/date/2010/August">August</a></li><li><a href="/archive/date/2010/May">May</a></li><li><a href="/archive/date/2010/April">April</a></li><li><a href="/archive/date/2010/March">March</a></li><li><a href="/archive/date/2010/January">January</a></li></ul><h3>2009</h3><ul class="clearfix"><li><a href="/archive/date/2009/November">November</a></li><li><a href="/archive/date/2009/October">October</a></li><li><a href="/archive/date/2009/August">August</a></li><li><a href="/archive/date/2009/July">July</a></li><li><a href="/archive/date/2009/June">June</a></li><li><a href="/archive/date/2009/May">May</a></li><li><a href="/archive/date/2009/April">April</a></li><li><a href="/archive/date/2009/March">March</a></li><li><a href="/archive/date/2009/February">February</a></li><li><a href="/archive/date/2009/January">January</a></li></ul><h3>2008</h3><ul class="clearfix"><li><a href="/archive/date/2008/December">December</a></li><li><a href="/archive/date/2008/November">November</a></li><li><a href="/archive/date/2008/October">October</a></li><li><a href="/archive/date/2008/September">September</a></li><li><a href="/archive/date/2008/August">August</a></li><li><a href="/archive/date/2008/July">July</a></li><li><a href="/archive/date/2008/June">June</a></li><li><a href="/archive/date/2008/May">May</a></li><li><a href="/archive/date/2008/April">April</a></li></ul><h3>2007</h3><ul class="clearfix"><li><a href="/archive/date/2007/December">December</a></li><li><a href="/archive/date/2007/November">November</a></li><li><a href="/archive/date/2007/October">October</a></li><li><a href="/archive/date/2007/August">August</a></li><li><a href="/archive/date/2007/July">July</a></li><li><a href="/archive/date/2007/June">June</a></li><li><a href="/archive/date/2007/May">May</a></li><li><a href="/archive/date/2007/April">April</a></li><li><a href="/archive/date/2007/March">March</a></li><li><a href="/archive/date/2007/February">February</a></li><li><a href="/archive/date/2007/January">January</a></li></ul><h3>2006</h3><ul class="clearfix"><li><a href="/archive/date/2006/November">November</a></li><li><a href="/archive/date/2006/October">October</a></li><li><a href="/archive/date/2006/September">September</a></li><li><a href="/archive/date/2006/August">August</a></li><li><a href="/archive/date/2006/July">July</a></li><li><a href="/archive/date/2006/June">June</a></li><li><a href="/archive/date/2006/May">May</a></li><li><a href="/archive/date/2006/April">April</a></li><li><a href="/archive/date/2006/March">March</a></li><li><a href="/archive/date/2006/February">February</a></li></ul><h3>2005</h3><ul class="clearfix"><li><a href="/archive/date/2005/October">October</a></li><li><a href="/archive/date/2005/September">September</a></li><li><a href="/archive/date/2005/July">July</a></li><li><a href="/archive/date/2005/June">June</a></li><li><a href="/archive/date/2005/May">May</a></li></ul>
</div>

            </div>

            <div class="ads">
    <script type="text/javascript" src="http://www.globalgiving.org/javascript/widget/widget.js">  { "projectids" : "46642"  }  </script>
</div>

        </div>

        <ul>

        </ul>

        <div class="footer">
    <p class="bottom-logo">Content with Style</p>
    <p>Copyright 2006-2011 Content with Style, All rights reserved.</p>
</div>

<script type="text/javascript" src="/3rdparty/jquery/jquery-1.2.6.min.js"></script>
<script type="text/javascript" src="/3rdparty/highlight/highlight.pack.js"></script>
<script type="text/javascript" src="/default/js/cws.js"></script>

    </body>
</html>

